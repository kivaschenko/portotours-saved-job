{% extends "base.html" %}
{% load static %}
{% block head %}
    <title>Experiences List</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
{% endblock head %}

{% block content %}

    <section class="experience-list-hero">
        <div class="container">
            <h1 class="experience-list-hero-title">
                Get the best Portugal experiences 
                <span>with</span>
                <img src="{% static 'icons/main-logo.svg' %}" alt="Destination logo">
            </h1>
            <div class="experience-list-hero-calendar">
                <form action="">
                    <div class="place-wrapper">
                        <label for="place">
                            Where to?
                        </label>
                        <select required name="place" id="place" class="place">
                            <option disabled selected hidden value="">Choose place</option>
                            <option value="Porto">
                                Porto
                            </option>
                            <option value="Lisbon">
                                Lisbon
                            </option>
                        </select>
                    </div>
                    <div class="date-wrapper">
                        <label for="date">
                            When?
                        </label>
                        <input type="date" name="date" id="date">
                    </div>
                    <button type="button" class="form-btn btn-type-1">
                        <img src="{% static 'icons/search.svg' %}" alt="">
                        Search
                    </button>
                </form>
            </div>
        </div>
    </section>
    <section class="experience-list">
        <div class="container">
            <div class="title-filter-wrapper">
                <h3 class="experience-list-title">
                    List of experiences
                </h3>
                <div class="filters-wrapper">
                    <div class="filter-wrapper">
                        <p class="experience-filter-title">
                            Sort by
                        </p>
                        <select name="experience filter" id="experience_filter">
                            <option value="Price">Private</option>
                            <option value="Discount">Group</option>
                        </select>
                    </div>
                    <div class="filter-wrapper">
                        <p class="experience-filter-title">
                            Sort by
                        </p>
                        <select name="experience filter" id="experience_filter">
                            <option value="Price">Price - Low To High</option>
                            <option value="Discount">Price - High To Low</option>
                            <option value="Date">Discount</option>
                            <option value="Hot_deals">Hot deals first</option>
                        </select>
                    </div>
                </div>

            </div>
            <ul class="experiences">
                {% if object_list %}
                    {% for object in object_list %}
                        <li class="experience-list-item">
                            <div class="list-item-img-wrapper">
                                {% if object.parent_experience.is_exclusive %}
                                    <span class="img-label">OneDayTours Exclusive</span>
                                {% else %}
                                    
                                {% endif %}
                                <img src="{% if object.parent_experience.card_image %}
                            {{ object.parent_experience.card_image.url }}{% else %}{% endif %}" alt="Card image for {{ object.name }}">
                            </div>
                            <div class="experience-list-content-wrapper">
                                <h5>
                                    {{ object.name }}
                                </h5>
                                <div class="experience-type-list-wrapper">

                                    <ul class="main-info-list">
                                        <li>
                                            Duration: {% if object.duration %}{{ object.duration|safe }}{% else %}{% endif %}
                                        </li>
                                        <li>
                                            Free Cancellation
                                        </li>
                                        {% if object.parent_experience.is_private %}
                                            <li>
                                                Private Tour
                                            </li>
                                        {% endif %}
                                        <li>
                                            Skip-The-Line
                                        </li>
                                    </ul>
                                </div>
                                <p class="experience-list-item-text">
                                    {{ object.short_introduction_text }}
                                    Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed qu. Neque porro quisquam
                                    est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed qu. Neque porro quisquam est, qui dolorem ipsum
                                    quia dolor sit amet, consectetur, adipisci velit, sed qu.
                                </p>
                                <div class="price-wrapper">
                                    <p class="old-price">
                                        € {{ object.parent_experience.old_price }}
                                    </p>
                                    <p class="new-price">
                                        € {{ object.parent_experience.price }}
                                    </p>
                                </div>
                                <a href="{% url 'experience-detail'  lang=object.language.code.lower slug=object.slug %}"
                                   class="experience-link-btn btn-type-1">
                                    Book now
                                </a>
                            </div>
                        </li>
                    {% endfor %}
                {% endif %}
            </ul>

            <div class="pagination-block">
                {% if is_paginated %}
                        {% if page_obj.has_previous %}
                            <button class="pagination-btn prev">
                                <a href="?page={{ page_obj.previous_page_number }}">
                                    <img src="{% static 'icons/pagination-arrow.svg' %}" alt="prev icon" class="orange">
                                </a>
                            </button>
                        {% else %}
                            <button class="pagination-btn prev">
                                    <img src="{% static 'icons/pagination-icon-grey.svg' %}" alt="prev icon" class="grey">
                            </button>
                        {% endif %}
                        <ul class="pagination-list">
                        {% for num in page_obj.paginator.page_range %}
                            
                            {% if page_obj.number == num %}
                                <li class="pagination-list-item active">{{ num }}</li>
                            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                                <li class="pagination-list-item"><a class="" href="?page={{ num }}">{{ num }}</a></li>
                            {% endif %}
                            
                        {% endfor %}
                        </ul>
                        {% if page_obj.has_next %}
                            <button class="pagination-btn next">
                                <a href="?page={{ page_obj.next_page_number }}">
                                    <img src="{% static 'icons/pagination-arrow.svg' %}" alt="prev icon" class="orange">
                                </a>
                            </button>
                            {% else %}
                            <button class="pagination-btn next">
                                <img src="{% static 'icons/pagination-icon-grey.svg' %}" alt="prev icon" class="grey">
                            </button>
                        {% endif %}
                    {% endif %}
            </div>
        </div>
    </section>

    <!-- Custom JS import -->
    <script src="{% static 'js/lang_selector_list_page.js' %}"></script>
{% endblock %}