{% extends 'base.html' %}
{% load static %}

{% block title %}
    {{ object.page_title }}
{% endblock %}
{% block title_suffix %}
    | One Day Tours Portugal
{% endblock title_suffix %}

{% block meta_tags %}
    <meta name="description" content={{ object.page_description }}>
{% endblock meta_tags %}
{% block content %}
    <section class="ppc-hero">
        <div class="img-hero-wrapper">
            {% if object.banner %}
                <img src="{{ object.banner.url }}">
            {% else %}
                <img src="{% static 'images/destination-list-hero-img.png' %}">
            {% endif %}
        </div>

        <div class="container">

            <h1 class="ppc-hero-title">
                {{ object.title }}
            </h1>
        </div>
    </section>

    <section class="best-tours">
        <div class="container">

            <div class="ppc-text">{{ object.display_content }}</div>
            <div class="title-btn-wrapper ppc-title-btn-wrapper">
                
                <div class="filters-wrapper">
                    <div class="filter-wrapper">
                        <p class="experience-filter-title">
                            Destinations
                        </p>
                        <select name="experience filter" id="destination-slug">
                            <option value="all">All</option>
                            {% for destination in destinations %}
                                <option value="{{ destination.0 }}">{{ destination.1 }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="filter-wrapper">
                        <p class="experience-filter-title">
                            Type
                        </p>
                        <select name="experience filter" id="tour_type">
                            <option value="all">All</option>
                            <option value="private">Private</option>
                            <option value="group">Group</option>
                        </select>
                    </div>
                    <div class="filter-wrapper">
                        <p class="experience-filter-title">
                            Time of Day
                        </p>
                        <select name="experience filter" id="time_of_day">
                            <option value="all">All</option>
                            <option value="morning">Morning (Before 12PM)</option>
                            <option value="afternoon">Afternoon (After 12PM)</option>
                            <option value="evening">Evening and night (After 5PM)</option>
                        </select>
                    </div>
                    <div class="filter-wrapper">
                        <p class="experience-filter-title">
                            Duration
                        </p>
                        <select name="experience filter" id="duration">
                            <option value="all">All</option>
                            <option value="0-1">Up to 1 hour</option>
                            <option value="1-4">1 to 4 hours</option>
                            <option value="4-10">4 to 10 hours</option>
                            <option value="24-72">1 to 3 days</option>
                        </select>
                    </div>
                    <div class="filter-wrapper">
                        <p class="experience-filter-title">
                            Sort by
                        </p>
                        <select name="experience filter" id="filter_by">
                            <option value="all">All</option>
                            <option value="price_low">Price - Low To High</option>
                            <option value="price_high">Price - High To Low</option>
                            <option value="discount">Discount</option>
                            <option value="hot_deals">Hot deals first</option>
                        </select>
                    </div>
                </div>
                
            </div>
            <div class="best-tours-cards-wrapper ppc-best-tours">
                {% if experiences %}
                    {% for experience in experiences %}
                        <div class="best-tours-card">
                            <div class="img-wrapper">
                                <a href="{% url 'experience-detail' lang=experience.language.code.lower slug=experience.slug %}" target="_blank">
                                    <img src="{% if experience.parent_experience.card_image %}
                                    {{ experience.parent_experience.card_image.url }}
                                    {% else %}{% endif %}" alt="card image for {{ experience.name }}">
                                </a>
                            </div>
                            <div class="card-content-wrapper">
                                {% if experience.parent_experience.increase_percentage_old_price %}
                                <div class="discount-banner-wrapper">
                                    <img src="{% static 'icons/discount-bg.svg' %}" alt="">
                                    <p class="discount">
                                        {{ experience.parent_experience.increase_percentage_old_price }}% discount
                                    </p>
                                </div>
                                {% endif %}
                                <div class="rating-wrapper body-text-b4">
                                    {% if object.average_rating %}
                                        <div class="rating-block">
                                            <p class="rating-num">{{ experience.average_rating }}</p>
                                            <img src="{% static 'icons/5-stars-icon.svg' %}" alt="best tour">
                                            
                                        </div>
                                    {% else %}
                                        <div class="rating-block">
                                            <p class="rating-num">5.0</p>
                                            <img src="{% static 'icons/5-stars-icon.svg' %}" alt="best tour">
                                        </div>
                                    {% endif %}
                                </div>
                                <a class="title-link" target="_blank"
                                   href="{% url 'experience-detail' lang=experience.language.code.lower slug=experience.slug %}">
                                    <p class="best-tours-card-title body-text-b2">
                                        {{ experience.name }}
                                    </p>
                                </a>
                                <div class="tour-info-wrapper">
                                    <ul class="tour-info-list">
                                        <li>
                                            <img src="{% static 'icons/duration-icon.svg' %}" alt="">
                                            {{ experience.display_duration }}
                                        </li>
                                        {% if experience.parent_experience.is_private %}
                                            <li>
                                                <img src="{% static 'icons/private-tour-icon.svg' %}" alt="">
                                                Private experience
                                            </li>
                                        {% else %}

                                            <li>
                                                <img src="{% static 'icons/group-tour-icon.svg' %}" alt="">
                                                Small Groups
                                            </li>
                                        {% endif %}
                                    </ul>
                                </div>
                                <div class="price-link-wrapper">
                                    <p class="tour-price">
                                        {% if experience.parent_experience.increase_percentage_old_price %}
                                        <span class="old-price">€ {{ experience.parent_experience.old_price }}</span>
                                        {% endif %}
                                        € {{ experience.parent_experience.price }}
                                        <span>{% if experience.parent_experience.is_private %}{% else %}/ per person{% endif %}</span>
                                    </p>
                                    <div class="book-banner-wrapper">
                                        <a target="_blank" href="{% url 'experience-detail' lang=experience.language.code.lower slug=experience.slug %}"
                                           class="tour-link btn-type-1">
                                            Book
                                        </a>
                                        <p class="free-canc-title">
                                            + free cancellation
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    No top Expirience found
                {% endif %}
                {% if experiences.has_other_pages %}
                    <div class="pagination-block ppc-pagination">

                            {% if experiences.has_previous %}
                                <button class="pagination-btn prev">
                                    <a href="?page={{ experiences.previous_page_number }}">
                                        <img src="{% static 'icons/pagination-arrow.svg' %}" alt="prev icon" class="orange">
                                    </a>
                                </button>
                            {% else %}
                                <button class="pagination-btn prev">
                                    <img src="{% static 'icons/pagination-icon-grey.svg' %}" alt="prev icon" class="grey">
                                </button>
                            {% endif %}
                            <ul class="pagination-list">
                                {% for num in experiences.paginator.page_range %}

                                    {% if experiences.number == num %}
                                        <li class="pagination-list-item active">{{ num }}</li>
                                        {% elif num > experiences.number|add:'-5' and num < experiences.number|add:'5' %}
                                        <li class="pagination-list-item"><a class="" href="?page={{ num }}">{{ num }}</a></li>
                                    {% endif %}

                                {% endfor %}
                            </ul>
                            {% if experiences.has_next %}
                                <button class="pagination-btn next">
                                    <a href="?page={{ page_obj.next_page_number }}">
                                        <img src="{% static 'icons/pagination-arrow.svg' %}" alt="prev icon" class="orange">
                                    </a>
                                </button>
                            {% else %}
                                <button class="pagination-btn next">
                                    <img src="{% static 'icons/pagination-icon-grey.svg' %}" alt="prev icon" class="grey">
                                </button>
                            {% endif %}

                    </div>
                {% endif %}
            </div>
            
        </div>
    </section>

    <section class="why">
        <div class="container">
            <h2 class="why-title">
                Why book with OneDayTours?
            </h2>
            <p class="why-subtitle body-text-b1">
                Create the best of your experience by visiting Portugal with our exclusive tours
            </p>
            <div class="why-cards-wrapper">
                <div class="why-card swiper-slide">
                    <img src="{% static 'icons/why-icon1.svg' %}" alt="" class="why-card-img">
                    <p class="why-text">
                        30+ Experiences in Portugal
                    </p>
                </div>
                <div class="why-card swiper-slide">
                    <img src="{% static 'icons/why-icon2.svg' %}" alt="" class="why-card-img">
                    <p class="why-text">
                        Guided by local experts
                    </p>
                </div>
                <div class="why-card swiper-slide">
                    <img src="{% static 'icons/why-icon3.svg' %}" alt="" class="why-card-img">
                    <p class="why-text">
                        Best price guarantee
                    </p>
                </div>
                <div class="why-card swiper-slide">
                    <img src="{% static 'icons/why-icon4.svg' %}" alt="" class="why-card-img">
                    <p class="why-text">
                        No hidden fees
                    </p>
                </div>
                <div class="why-card swiper-slide">
                    <img src="{% static 'icons/why-icon5.svg' %}" alt="" class="why-card-img">
                    <p class="why-text">
                        Free cancellation
                    </p>
                </div>
                <div class="why-card swiper-slide">
                    <img src="{% static 'icons/why-icon6.svg' %}" alt="" class="why-card-img">
                    <p class="why-text">
                        Safe and secure website
                    </p>
                </div>
            </div>
        </div>
    </section>
    <section class="refund-banner ppc-page">
        <div class="container">
            <div class="img-wrapper">
                <img src="{% static 'icons/refund-banner-icon.svg' %}" alt="">
            </div>
            <div class="banner-content">
                <h3 class="banner-title">
                    Free cancellation + 100% Refund
                </h3>
                <p class="banner-subtitle">
                    Full refund of reservation is available up to 24 hours before your trip starts
                </p>
            </div>
        </div>
    </section>
    <section class="testimonials-slider-section">
        <div class="container">
            <h2 class="testimonials-title">
                testimonials
            </h2>
            <p class="testimonials-subtitle body-text-b1">
                Read the reviews of our clients about their experience with our service
            </p>
            {% if testimonials %}
                <div class="testimonials-slider">
                    <div class="swiper-wrapper">
                        {% for testimonial in testimonials %}
                            <div class="swiper-slide">
                                <p class="swiper-text">
                                    {{ testimonial.short_text }}
                                </p>
                                <div class="author-wrapper">
                                    {% if testimonial.profile.avatar %}
                                        <img src="{{ testimonial.profile.avatar.url }}" alt="Avatar">
                                    {% else %}
                                        <img src="{% static 'images/default-avatar.jpg' %}" alt="Default Avatar">
                                    {% endif %}
                                    <p class="name">{{ testimonial.profile.name }}</p>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    <div class="swiper-pagination"></div>
                    <div class="swiper-button-prev"></div>
                    <div class="swiper-button-next"></div>
                </div>
            {% else %}
                <p>No any testimonials yet...</p>
            {% endif %}
        </div>
    </section>
    <section class="blog-articles">
        <div class="container">
            <h2 class="blog-article-title">
                Featured articles
            </h2>
            <div class="blog-article-cards-wrapper">
                <div class="blog-card">
                    <div class="img-wrapper">
                        <a href="">
                            <img src="{% static 'images/blog-card-example.jpg' %}">
                        </a>
                    </div>
                    <div class="card-content-wrapper">
                        <p class="card-date">
                            MM/DD/YYYY
                        </p>
                        <h5 class="card-title">
                            <a href="#">
                                Porto: Spiritus multimedia show admission ticket
                            </a>
                        </h5>
                    </div>
                </div>
                <div class="blog-card">
                    <div class="img-wrapper">
                        <a href="">
                            <img src="{% static 'images/blog-card-example.jpg' %}">
                        </a>
                    </div>
                    <div class="card-content-wrapper">
                        <p class="card-date">
                            MM/DD/YYYY
                        </p>
                        <h5 class="card-title">
                            <a href="#">
                                Porto: Spiritus multimedia show admission ticket
                            </a>
                        </h5>
                    </div>
                </div>
                <div class="blog-card">
                    <div class="img-wrapper">
                        <a href="">
                            <img src="{% static 'images/blog-card-example.jpg' %}">
                        </a>
                    </div>
                    <div class="card-content-wrapper">
                        <p class="card-date">
                            MM/DD/YYYY
                        </p>
                        <h5 class="card-title">
                            <a href="#">
                                Porto: Spiritus multimedia show admission ticket
                            </a>
                        </h5>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="text-block">
        <div class="container">
            <h2 class="text-block-title">
                frequently asked questions
            </h2>
            <div class="text-block-content">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Gravida neque convallis a cras semper auctor neque vitae tempus. Urna neque viverra justo nec. Ultricies tristique nulla aliquet enim. Diam donec adipiscing tristique risus nec feugiat in fermentum. Platea dictumst vestibulum rhoncus est pellentesque elit ullamcorper. Aenean sed adipiscing diam donec adipiscing. At erat pellentesque adipiscing commodo elit. Massa massa ultricies mi quis. Sed elementum tempus egestas sed. In eu mi bibendum neque. Pulvinar etiam non quam lacus suspendisse faucibus. Dolor sit amet consectetur adipiscing elit. Tortor consequat id porta nibh venenatis cras sed felis eget.
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Gravida neque convallis a cras semper auctor neque vitae tempus. Urna neque viverra justo nec. Ultricies tristique nulla aliquet enim. Diam donec adipiscing tristique risus nec feugiat in fermentum. Platea dictumst vestibulum rhoncus est pellentesque elit ullamcorper. Aenean sed adipiscing diam donec adipiscing. At erat pellentesque adipiscing commodo elit. Massa massa ultricies mi quis. Sed elementum tempus egestas sed. In eu mi bibendum neque. Pulvinar etiam non quam lacus suspendisse faucibus. Dolor sit amet consectetur adipiscing elit. Tortor consequat id porta nibh venenatis cras sed felis eget.
            </div>
        </div>
    </section>
    <section class="faq">
        <div class="container">
            <h2 class="faq-title">
                frequently asked questions
            </h2>
            <p class="faq-subtitle">
                Get clear and useful information for the most common queries about OneDayTours in Lisbon
            </p>
            <div class="faq-block" bis_skin_checked="1">
                <p class="faq-question">What is the best way to get to Tomar from Lisbon?</p>
                <div bis_skin_checked="1"><p>Train is the most convenient way to reach Tomar from Lisbon. The departure time can be seen on the timetable. The train departs regularly from Lisbon's Santa Apolónia station and takes approximately 2 hours to reach Tomar.</p></div>
            </div>
            <div class="faq-block" bis_skin_checked="1">
                <p class="faq-question">What is the best way to get to Tomar from Lisbon?</p>
                <div bis_skin_checked="1"><p>Train is the most convenient way to reach Tomar from Lisbon. The departure time can be seen on the timetable. The train departs regularly from Lisbon's Santa Apolónia station and takes approximately 2 hours to reach Tomar.</p></div>
            </div>
            <div class="faq-block" bis_skin_checked="1">
                <p class="faq-question">What is the best way to get to Tomar from Lisbon?</p>
                <div bis_skin_checked="1"><p>Train is the most convenient way to reach Tomar from Lisbon. The departure time can be seen on the timetable. The train departs regularly from Lisbon's Santa Apolónia station and takes approximately 2 hours to reach Tomar.</p></div>
            </div>
        </div>
    </section>
    <section class="guided-tours">
        {% if object.related_landing_pages.all %}
            <div class="container">
                <h2>{% if object.title_related_landing_pages %}{{ object.title_related_landing_pages }}{% else %}{{ object.title }}{% endif %}</h2>
                <ul>
                    {% for land_page in object.related_landing_pages.all %}
                        <li><a href="{% url "landing-page" lang=land_page.language.code.lower slug=land_page.slug %}">{{ land_page.title }}</a></li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </section>

    <!-- Custom JS import -->
    <script src="{% static 'js/lang_selector_list_page.js' %}"></script>
    <script src="{% static 'js/clean_landing_url.js' %}"></script>
    <script>
        const swiperTestimonials = new Swiper(".testimonials-slider", {
            speed: 1000,
            spaceBetween: 24,
            loop: true,
            slidesPerView: 3,
            autoplay: {
                delay: 5000,
            },
            centeredSlides: true,
            breakpoints: {
                200: {
                    slidesPerView: 1,
                    spaceBetween: 10,

                },
                767: {
                    slidesPerView: 3,
                    spaceBetween: 24,

                }
            },
            // Navigation arrows
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
        });
    </script>
{% endblock %}